<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cozy Life Glow-Up</title>
<style>
  body { margin:0; font-family:sans-serif; background:#ccc; color:#fff; }
  header { display:flex; justify-content:space-between; padding:8px; background:#222; }
  canvas { display:block; background:#f2e1c1; margin:auto; }
  .stats { display:grid; grid-template-columns:repeat(2, 1fr); gap:4px; padding:4px; background:#333; }
  .bar { background:#555; height:10px; position:relative; }
  .bar-fill { background:linear-gradient(to right, #0ff, #0f0); height:100%; }
  #tabs { display:flex; background:#111; }
  #tabs button { flex:1; padding:6px; background:#111; border:none; color:#fff; }
  #tabs button.active { background:#333; }
  .panel { display:none; padding:8px; background:#222; }
  .panel.active { display:block; }
  .grid-acts { display:grid; grid-template-columns:repeat(3,1fr); gap:4px; }
  button { padding:8px; border:none; border-radius:4px; background:#444; color:white; }
  button:hover { background:#666; }
  #joy { position:fixed; bottom:80px; left:20px; width:80px; height:80px; border-radius:50%; background:rgba(255,255,255,0.2); display:none; }
  #knob { width:30px; height:30px; background:#fff; border-radius:50%; position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); }
</style>
</head>
<body>

<header>
  <div>Cozy Life <span style="background:#555; padding:2px 4px; border-radius:4px;">Glow-Up</span></div>
  <div><span id="clock">7:00 AM</span> <span id="jobLabel">Unemployed</span> $<span id="money">120</span></div>
</header>

<canvas id="game"></canvas>

<div class="stats">
  <label>Energy<div class="bar"><div id="energy" class="bar-fill" style="width:80%"></div></div></label>
  <label>Hunger<div class="bar"><div id="hunger" class="bar-fill" style="width:80%"></div></div></label>
  <label>Fun<div class="bar"><div id="fun" class="bar-fill" style="width:80%"></div></div></label>
  <label>Clean<div class="bar"><div id="clean" class="bar-fill" style="width:80%"></div></div></label>
  <label>Edu<div class="bar"><div id="edu" class="bar-fill" style="width:20%"></div></div></label>
  <label>Rep<div class="bar"><div id="rep" class="bar-fill" style="width:10%"></div></div></label>
</div>

<section id="tabs">
  <button data-tab="actions" class="active">Actions</button>
  <button data-tab="jobs">Jobs</button>
  <button data-tab="relationships">Relationships</button>
  <button data-tab="me">Me</button>
</section>

<section id="panel-actions" class="panel active">
  <div class="grid-acts" id="actions">
    <button data-act="eat">Eat 🍜</button>
    <button data-act="sleep">Sleep 🛏</button>
    <button data-act="shower">Shower 🚿</button>
    <button data-act="tv">Watch TV 📺</button>
    <button data-act="study">Study 📚</button>
    <button data-act="work">Work 💼</button>
    <button data-act="clean">Clean 🧹</button>
    <button data-act="save">Save 💾</button>
  </div>
  <div class="hint">Move with joystick or tap the floor.</div>
</section>

<section id="panel-jobs" class="panel">
  <div class="list" id="jobsList"></div>
  <div class="hint">Get hired, then “Work” during day.</div>
</section>

<section id="panel-relationships" class="panel">
  <div class="list" id="npcList"></div>
  <div class="card" id="npcActions" style="display:none;">
    <div id="npcName"></div>
    <div style="display:flex;gap:8px;">
      <button class="mini" data-npc="chat">Chat 💬</button>
      <button class="mini" data-npc="compliment">Compliment 😊</button>
    </div>
  </div>
</section>

<section id="panel-me" class="panel">
  <div>Create character: <input placeholder="Name"></div>
</section>

<div id="joy"><div id="knob"></div></div>

<script>
const cvs=document.getElementById('game'),ctx=cvs.getContext('2d',{alpha:false});
let W=0,H=0,DPR=Math.max(1,Math.min(2,window.devicePixelRatio||1));
function resize(){
  W=window.innerWidth-20;H=Math.max(360,window.innerHeight-400);
  cvs.width=Math.floor(W*DPR);cvs.height=Math.floor(H*DPR);
  cvs.style.width=W+'px';cvs.style.height=H+'px';
  ctx.setTransform(DPR,0,0,DPR,0,0);
}
addEventListener('resize',resize,{passive:true});resize();

const energyEl=byId('energy'), hungerEl=byId('hunger'), funEl=byId('fun'), cleanEl=byId('clean'), eduEl=byId('edu'), repEl=byId('rep');
const moneyEl=byId('money'), jobLabel=byId('jobLabel'), clockEl=byId('clock');
const tabs=byId('tabs');
const panels={actions:byId('panel-actions'),jobs:byId('panel-jobs'),relationships:byId('panel-relationships'),me:byId('panel-me')};
tabs.addEventListener('click',e=>{
  const b=e.target.closest('button');if(!b)return;
  qsa('#tabs button').forEach(x=>x.classList.remove('active'));
  b.classList.add('active');
  Object.values(panels).forEach(p=>p.classList.remove('active'));
  panels[b.dataset.tab].classList.add('active');
});

const joy=byId('joy'),knob=byId('knob');
let joyActive=false,joyCenter=null,joyVec={x:0,y:0};
cvs.addEventListener('pointerdown',e=>{
  const r=cvs.getBoundingClientRect();const x=e.clientX-r.left,y=e.clientY-r.top;
  target={x,y};startJoy();
});
cvs.addEventListener('pointerup',stopJoy);
cvs.addEventListener('pointermove',e=>{
  if(!joyActive)return;
  const r=joy.getBoundingClientRect();
  if(!joyCenter)joyCenter={x:r.left+r.width/2,y:r.top+r.height/2};
  const dx=e.clientX-joyCenter.x,dy=e.clientY-joyCenter.y;
  const len=Math.hypot(dx,dy)||1,max=46;const nx=dx/len,ny=dy/len;
  joyVec.x=nx;joyVec.y=ny;
  knob.style.left=(50+clamp(dx,-max,max))+'%';
  knob.style.top=(50+clamp(dy,-max,max))+'%';
});
function startJoy(){joy.style.display='block';joyActive=true;joyCenter=null;}
function stopJoy(){joy.style.display='none';joyActive=false;joyVec.x=joyVec.y=0;knob.style.left='50%';knob.style.top='50%';}

let player={x:100,y:100,size:20};
let target=null;
function draw(){
  ctx.fillStyle='#f2e1c1';ctx.fillRect(0,0,W,H); // room background
  ctx.fillStyle='saddlebrown';ctx.fillRect(0,0,W,20); // wall
  ctx.fillStyle='black';ctx.beginPath();ctx.arc(player.x,player.y,player.size,0,Math.PI*2);ctx.fill();
  if(target){const dx=target.x-player.x,dy=target.y-player.y;const dist=Math.hypot(dx,dy);
    if(dist>1){player.x+=dx/dist;player.y+=dy/dist;}}
  requestAnimationFrame(draw);
}
draw();

function byId(id){return document.getElementById(id);}
function qsa(sel){return document.querySelectorAll(sel);}
function clamp(v,min,max){return Math.min(Math.max(v,min),max);}
</script>

</body>
</html>
